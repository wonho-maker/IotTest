<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://thymeleaf.org">
<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    
 	<!-- jQuery -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>

    <!-- high chart -->
    <script src="http://code.highcharts.com/highcharts.js"></script>
    
    <script type="text/javascript">
    	function getChartData(date)
		{
			return Date.UTC(date.substring(0,4), date.substring(5,7)-1, date.substring(8,10), date.substring(11,13), 
					date.substring(14,16), date.substring(17,19)) - (myOffset * 60000);
		}
    	
    	function getCurrentId()
    	{
			var currentUrl = window.location.pathname;
    		
    		var currentId = currentUrl.split("chart");
    		currentId = currentId[currentId.length - 1];
    		
    		currentId = "/api"+currentId;
    		
			return currentId;
    	}
    	
    	
    </script>
  
    
    
    
<title>Chart</title>
</head>
<body>
	<div id="test1"></div>
	<div id="container" style="width:100%; height:330px;"></div>
	
	<script>
    	( function() {
    		$.getJSON(getCurrentId())
    		.done(function(datas)
    			{
    				//alert(data);
    				var items = [];
    				console.log(datas);
    				//console.log(datas.devices.deviceName);
    				$.each( datas, function(i, data)
    				{
    					console.log(i);
    					$("#test1").append(
    					"<li>" + data.id + "</li>"+
    					"<li>" + data.deviceName + "</li>");
    					
    					//console.log(devices.id);
    					//console.log(devices.deviceName);
    				});
    			
    				$( "<ul/>", {
    					"class": "my-new-list",
    					html: items.join("")
    				}).appendTo('body');
    			})
    			.fail(function(jqxhr, textStatus, error) {
    				console.log(textStatus +", ", error);
    			});	
    		
		})();
    	
    	
    </script>
    
	<script th:inline="javascript">
	/*<![CDATA[*/
	
	var myOffset = new Date().getTimezoneOffset();
	
	$(function () { 
	    $('#container').highcharts({
	        title: {
	            text: 'test'
	        },
	        xAxis: {
	        	title: {
	        		text: 'time'
	        	}
	        	categories: ['Apples', 'Bananas', 'Oranges']
	        },
	        yAxis: {
	            title: {
	                text: 'value'
	            }
	        },
	        series: [{
	            name: 'Jane',
	            data: [1, 0, 4]
	        }, {
	            name: 'John',
	            data: [5, 7, 3]
	        }]
	    });
	});
	
	/*]]>*/
	</script>
	
</body>
</html>